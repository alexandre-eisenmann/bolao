<!DOCTYPE html>
<html>
<head>
  <script src="d3.v3.min.js" charset="utf-8"></script>
  <script src="jquery-2.1.1.min.js" charset="utf-8"></script>
  <script src="data.js" charset="utf-8"></script>
  <script src="bolao.js" charset="utf-8"></script>
  <link rel="stylesheet" type="text/css" href="bolao.css">
</head>
<body>

  <div class="header">
    <div class="game">
      <div class="left">BRA</div>
      <div class="right">CRO</div>
      <div class="left-gols">3</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">MEX</div>
      <div class="right">CAM</div>
      <div class="left-gols">1</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">ESP</div>
      <div class="right">HOL</div>
      <div class="left-gols">1</div>
      <div class="right-gols">5</div>
    </div>
    <div class="game">
      <div class="left">CHI</div>
      <div class="right">AUS</div>
      <div class="left-gols">3</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">COL</div>
      <div class="right">GRE</div>
      <div class="left-gols">3</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">URU</div>
      <div class="right">COS</div>
      <div class="left-gols">1</div>
      <div class="right-gols">3</div>
    </div>
    <div class="game">
      <div class="left">ING</div>
      <div class="right">ITA</div>
      <div class="left-gols">1</div>
      <div class="right-gols">2</div>
    </div>
    <div class="game">
      <div class="left">CDM</div>
      <div class="right">JAP</div>
      <div class="left-gols">2</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">SUI</div>
      <div class="right">EQU</div>
      <div class="left-gols">2</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">FRA</div>
      <div class="right">HON</div>
      <div class="left-gols">3</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">ARG</div>
      <div class="right">BOS</div>
      <div class="left-gols">2</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">ALE</div>
      <div class="right">POR</div>
      <div class="left-gols">4</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">IRA</div>
      <div class="right">NIG</div>
      <div class="left-gols">0</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">GAN</div>
      <div class="right">EUA</div>
      <div class="left-gols">1</div>
      <div class="right-gols">2</div>
    </div>
    <div class="game">
      <div class="left">BEL</div>
      <div class="right">AGL</div>
      <div class="left-gols">2</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">BRA</div>
      <div class="right">MEX</div>
      <div class="left-gols">0</div>
      <div class="right-gols">0</div>
    </div>
    <div class="game">
      <div class="left">RUS</div>
      <div class="right">COR</div>
      <div class="left-gols">1</div>
      <div class="right-gols">1</div>
    </div>
    <div class="game">
      <div class="left">AUS</div>
      <div class="right">HOL</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">ESP</div>
      <div class="right">CHI</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">CRO</div>
      <div class="right">CAM</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">COL</div>
      <div class="right">CDM</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">URU</div>
      <div class="right">ING</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">JAP</div>
      <div class="right">GRE</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">ITA</div>
      <div class="right">COS</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">SUI</div>
      <div class="right">FRA</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">HON</div>
      <div class="right">EQU</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">ARG</div>
      <div class="right">IRA</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">ALE</div>
      <div class="right">GAN</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">NIG</div>
      <div class="right">BOS</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">BEL</div>
      <div class="right">RUS</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">COR</div>
      <div class="right">AGL</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">EUA</div>
      <div class="right">POR</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">AUS</div>
      <div class="right">ESP</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">HOL</div>
      <div class="right">CHI</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">CAM</div>
      <div class="right">BRA</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">CRO</div>
      <div class="right">MEX</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">COS</div>
      <div class="right">ING</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">ITA</div>
      <div class="right">URU</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">GRE</div>
      <div class="right">CDM</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">JAP</div>
      <div class="right">COL</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">BOS</div>
      <div class="right">IRA</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">NIG</div>
      <div class="right">ARG</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">EQU</div>
      <div class="right">FRA</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">HON</div>
      <div class="right">SUI</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">POR</div>
      <div class="right">GAN</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">EUA</div>
      <div class="right">ALE</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">AGL</div>
      <div class="right">RUS</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
    <div class="game">
      <div class="left">COR</div>
      <div class="right">BEL</div>
      <div class="left-gols"></div>
      <div class="right-gols"></div>
    </div>
  </div>
  <div class="botoes" >
    <div id="stepfast" class="botao clickable">ESTOU COM PRESSA</div>
    <div id="step" class="botao clickable">CALCULAR PROXIMO JOGO</div>
  </div>
  <div id="jogos"></div>
  <div id="resultados"></div>

<script type="text/javascript">

var marked;

$( document ).ready(function() {

   sort();
   start();

   $('body').bind('keypress', function(e) {

     if (!marked) return;

      var className=".left-gols";
      if (marked.hasClass("right")) {
        className=".right-gols";
      }

     var gols = Number(marked.parent().find(className).html());


     var code = e.keyCode || e.which;
     if (code == 43) {
       gols++;
       marked.parent().find(className).html(gols)
     } else if (code == 95) {
       if (gols>0) gols--;
       marked.parent().find(className).html(gols)
     }
   });



    $(".left, .right").click(function() {

       if (marked) {
         marked.toggleClass("marked");
       }
       marked = $(this);
       marked.toggleClass("marked");

    })

    var update = buildUpdate(5);

    var process = function() {

        var botao  = $(this).attr("id");
        if (!$(this).hasClass("clickable"))
          return;


        if (botao == "stepfast") {
          mode = 'pressa';
          rainDuration = 0;
          sortDuration = 0;
          goLeftDuration = 0;
          assyncDurationDown = 0;
          assyncDurationUp = 0;
          pointsDuration = 0;

        } else {
          mode = 'animacao';
          rainDuration = 1000;
          sortDuration = 500;
          goLeftDuration = 50;
          assyncDurationDown = 30;
          assyncDurationUp = 10;
          pointsDuration = 20;
        }

       var selectGame = $(".select-game").first();
       var game;
       if (selectGame.length > 0 ) {
         game = selectGame.next()
       } else {
         game = $(".game").first()
       }

       var leftGols = game.find('.left-gols').html();
       var rightGols = game.find('.right-gols').html();

       if (leftGols && rightGols) {
         $(this).toggleClass("clickable");

         if (selectGame.length > 0 ) selectGame.toggleClass("select-game")
         game.toggleClass("select-game");

         update(leftGols, rightGols, function() {
            $("#"+ botao).toggleClass("clickable");
            $(window).scrollTop(0);
         });
      }
    }

    $(".clickable").click(process);


});

</script>
</body>
</html>
